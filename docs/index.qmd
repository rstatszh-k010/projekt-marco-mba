---
title: ""
author: "Marco Prencipe"
format: html
editor: visual
---

```{r}
library(tidyverse)
```

# Einleitung

In diesem Projekt werden die Lehrvertragsauflösungen in verschiedenen Berufsbranchen des Kantons Zürich über die letzten 25 Jahre untersucht. Die zugrundeliegenden Daten stammen aus der Datenbank der Schulverwaltungslösung für Berufsschulen des Mittelschul- und Berufsbildungsamtes Kanton Zürich und enthalten Informationen zu Branche, Geschlecht, Generation (basierend auf Geburtsjahr), Vertragslaufzeiten und Auflösungen.

## Daten

```{r}
daten_orig <- read_csv(here::here("daten/raw/Statistik_Abbruchquoten_KTZH.csv"), na = c("", "NULL"))
```

## Analyseziele

Das Hauptziel der Analyse ist es, herauszufinden, wie sich die Lehrabbrüche im Zeitverlauf je nach Branche, Generation und Geschlecht entwickelt haben. Besonderes Augenmerk liegt dabei auf Unterschieden zwischen den Branchen, auf Trends über die Zeit und auf möglichen Mustern zwischen den Generationen (z.B. Generation Z, Millennials) und Geschlechtern.

# Daten Aufbereitung

```{r}
# Alle Zeilen mit mindestens einem NA Werte und "Geschlecht unbekannt" entfernen
daten_clean <- daten_orig |>
  filter(if_all(everything(), ~ !is.na(.))) |>
  filter(Geschlecht != "Geschlecht unbekannt")

# Numerische Spalten als numerisch setzen falls read_csv das nicht korrekt erkennt
numerische_spalten <- c(
  "Gesamt_Lehrvertraege", 
  "Anzahl_Aufloesungen",
  "Aufloesungsquote_Prozent",
  "Zeitspanne_Jahre",
  "Aufloesungen_pro_Jahr"
)
daten_clean <- daten_clean |>
  mutate(across(all_of(numerische_spalten), as.numeric))

glimpse(daten_clean)

write_csv(x = daten_clean, 
          here::here("daten/processed/Statistik_Abbruchquoten_KTZH.csv"))
```

# Daten Visualisierung

```{r}

```
